---

- name: Install unattended-upgrades
  ansible.builtin.apt:
    name: "unattended-upgrades"
    update_cache: true

- name: Deploy apt sources.list
  ansible.builtin.template:
    src: "sources.list.j2"
    dest: "/etc/apt/sources.list"
    owner: "root"
    group: "root"
    mode: "0644"

- name: Deploy auto-upgrades configuration
  ansible.builtin.template:
    src: "20auto-upgrades.j2"
    dest: "/etc/apt/apt.conf.d/20auto-upgrades"
    owner: "root"
    group: "root"
    mode: "0644"

- name: Deploy unattended-upgrades configuration
  ansible.builtin.template:
    src: "52unattended-upgrades.j2"
    dest: "/etc/apt/apt.conf.d/52unattended-upgrades"
    owner: "root"
    group: "root"
    mode: "0644"
